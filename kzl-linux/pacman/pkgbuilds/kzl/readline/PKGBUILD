# Maintainer: Zelun Kong <zelun.kong@outlook.com>

pkgname=readline
pkgver=8.2
pkgrel=1
epoch=
pkgdesc="GNU readline library"
arch=('x86_64')
url="https://tiswww.case.edu/php/chet/readline/rltop.html"
license=('KZL')
depends=(glibc ncurses)
backup=(etc/inputrc)
options=(!emptydirs)
source=(git+https://git.savannah.gnu.org/git/readline.git#branch=master
        inputrc)
sha256sums=('SKIP'
            '1372f6d69c3638d63724c6daecf339c82bb9520a77ead2d497cb66e7114e62bb')

build() {
  cd $pkgname

  ./configure \
    --prefix=/usr \
    --with-curses

  make -O \
    SHOBJ_CFLAGS='-fPIC' \
    SHLIB_LIBS='-lncursesw'

}

package() {
  cd $pkgname

  make SHLIB_LIBS='-lncursesw' DESTDIR="$pkgdir/" install

  install -Dm644 "$srcdir"/inputrc "$pkgdir"/etc/inputrc
}
